lib_LTLIBRARIES = libeig_mpfr.la libeig_override.la
libeig_mpfr_la_CPPFLAGS = $(OPENMP_CXXFLAGS) -I$(top_srcdir)/include -I$(LAPACK_INCLUDEDIR) -I$(GMP_INCLUDEDIR) -I$(MPFR_INCLUDEDIR)  -I$(MPC_INCLUDEDIR) -I$(top_srcdir)/mpfrc++ -D___MPLAPACK_BUILD_WITH_MPFR___ -I$(top_srcdir)/mplapack/test/fable
libeig_mpfr_la_SOURCES = $(EIG_SOURCES)

EIG_SOURCES = \
../common/Cslect.cpp \
../common/Rslect.cpp \
../common/Rlctsx.cpp \
../common/Rlacsg.cpp \
../common/Clacsg.cpp \
../common/Rlasum.cpp \
../common/Rlctes.cpp \
../common/Alasmg.cpp \
../common/Alasum.cpp \
../common/Alasvm.cpp \
../common/Rlarfy.cpp \
../common/Clarfy.cpp \
../common/Clctes.cpp \
../common/Rsxt1.cpp \
../common/Clctsx.cpp \
../common/Rget10.cpp \
../common/Cget10.cpp \
../common/Rlsets.cpp \
../common/Clsets.cpp \
../common/Rbdt02.cpp \
../common/Cbdt02.cpp \
../common/Rbdt05.cpp \
../common/Rget02.cpp \
../common/Cget02.cpp \
../common/Cbdt05.cpp \
../common/Rglmts.cpp \
../common/Rhst01.cpp \
../common/Cglmts.cpp \
../common/Chst01.cpp \
../common/Rstect.cpp \
../common/Rsgt01.cpp \
../common/Rget54.cpp \
../common/Rsyt22.cpp \
../common/Csgt01.cpp \
../common/Cget54.cpp \
../common/Rsvdct.cpp \
../common/Chet22.cpp \
../common/Rstt21.cpp \
../common/Rlafts.cpp \
../common/Cstt21.cpp \
../common/Rort01.cpp \
../common/Rsvdch.cpp \
../common/Cunt01.cpp \
../common/Rbdt04.cpp \
../common/Cchkec.cpp \
../common/Rstech.cpp \
../common/Rort03.cpp \
../common/Rget51.cpp \
../common/Cget51.cpp \
../common/Rstt22.cpp \
../common/Rsbt21.cpp \
../common/Cstt22.cpp \
../common/Chbt21.cpp \
../common/Cget52.cpp \
../common/Rbdt03.cpp \
../common/Cbdt03.cpp \
../common/Rget53.cpp \
../common/Cunt03.cpp \
../common/Rckgsv.cpp \
../common/Cget22.cpp \
../common/Rgqrts.cpp \
../common/Rgrqts.cpp \
../common/Cckgsv.cpp \
../common/Rbdt01.cpp \
../common/Cgqrts.cpp \
../common/Cgrqts.cpp \
../common/Cbdt01.cpp \
../common/Rckglm.cpp \
../common/Cckglm.cpp \
../common/Rlatb9.cpp \
../common/Rckcsd.cpp \
../common/Cckcsd.cpp \
../common/Rcklse.cpp \
../common/Ccklse.cpp \
../common/Rchkec.cpp \
../common/Rgsvts3.cpp \
../common/Csbmv.cpp \
../common/Rlarhs.cpp \
../common/Cgsvts3.cpp \
../common/Rget22.cpp \
../common/Rget52.cpp \
../common/Rget33.cpp \
../common/Rsyt21.cpp \
../common/Chet21.cpp \
../common/Rspt21.cpp \
../common/Clarhs.cpp \
../common/Cerrec.cpp \
../common/Chpt21.cpp \
../common/Cerrbd.cpp \
../common/Rerrec.cpp \
../common/Cckgqr.cpp \
../common/Rckgqr.cpp \
../common/Clatm4.cpp \
../common/Alahdg.cpp \
../common/Rlatm4.cpp \
../common/Rerrbd.cpp \
../common/Rcsdts.cpp \
../common/Rget39.cpp \
../common/Ccsdts.cpp \
../common/Cerrhs.cpp \
../common/Rerrhs.cpp \
../common/Rchkbb.cpp \
../common/Cchkbb.cpp \
../common/Rget32.cpp \
../common/Rget34.cpp \
../common/Cget23.cpp \
../common/Cerred.cpp \
../common/Rget23.cpp \
../common/Rerred.cpp \
../common/Rchksb.cpp \
../common/Cchkhb.cpp \
../common/Rget31.cpp \
../common/Cget24.cpp \
../common/Cchkbd.cpp \
../common/Cdrves.cpp \
../common/Cdrvev.cpp \
../common/Rdrvev.cpp \
../common/Rchksb2stg.cpp \
../common/Rget24.cpp \
../common/Cchkhb2stg.cpp \
../common/Rdrgev.cpp \
../common/Rdrgev3.cpp \
../common/Cdrgev.cpp \
../common/Cdrgev3.cpp \
../common/Rdrves.cpp \
../common/Rlahd2.cpp \
../common/Cdrges.cpp \
../common/Cdrges3.cpp \
../common/Cchkhs.cpp \
../common/Rchkhs.cpp \
../common/Rdrges.cpp \
../common/Rdrges3.cpp \
../common/Rchkgg.cpp \
../common/Cchkgg.cpp \
../common/Rdrvbd.cpp \
../common/Rchkbd.cpp \
../common/Rdrvsg.cpp \
../common/Cdrvbd.cpp \
../common/Cdrvsg.cpp \
../common/Cerrgg.cpp \
../common/Cerrst.cpp \
../common/Rerrgg.cpp \
../common/Rerrst.cpp \
../common/Rdrvsg2stg.cpp \
../common/Cdrvsg2stg.cpp \
../common/Rchkst.cpp \
../common/Cchkst.cpp \
../common/Rchkst2stg.cpp \
../common/Cchkst2stg.cpp \
../common/Cdrvst.cpp \
../common/Cdrvst2stg.cpp \
../common/Rdrvst.cpp \
../common/Rdrvst2stg.cpp \
../common/Cchkbk.cpp \
../common/Rchkbk.cpp \
../common/Cget36.cpp \
../common/Rchkgl.cpp \
../common/Cchkgl.cpp \
../common/Rget36.cpp \
../common/Rchkgk.cpp \
../common/Cchkgk.cpp \
../common/Cget35.cpp \
../common/Rget35.cpp \
../common/Rget38.cpp \
../common/Cget38.cpp \
../common/Cget37.cpp \
../common/Rget37.cpp \
../common/Cdrgvx.cpp \
../common/Rget40.cpp \
../common/Rdrgvx.cpp \
../common/Rchkbl.cpp \
../common/Cchkbl.cpp \
../common/Rdrvvx.cpp \
../common/Cdrvvx.cpp \
../common/Cdrvsx.cpp \
../common/Rdrvsx.cpp \
../common/Cdrgsx.cpp \
../common/Rdrgsx.cpp \
../common/Alareq.cpp \
../common/Alarqg.cpp \
../common/iMlaenv.cpp \
../common/chkxer.cpp \
../common/xlaenv.cpp 


libeig_override_la_CPPFLAGS = $(OPENMP_CXXFLAGS) -I$(top_srcdir)/include -I$(GMP_INCLUDEDIR) -I$(MPFR_INCLUDEDIR)  -I$(MPC_INCLUDEDIR) -I$(top_srcdir)/mpfrc++ -D___MPLAPACK_BUILD_WITH_MPFR___ -I$(top_srcdir)/mplapack/test/fable
libeig_override_la_SOURCES = ../common/Mxerbla.cpp ../common/iMlaenv.cpp

libdepends = -L. -leig_mpfr -leig_override -L../../matgen -lmatgen_mpfr -L$(top_builddir)/mplapack/reference -lmplapack_mpfr -L$(top_builddir)/mpblas/reference -lmpblas_mpfr 
mplibs=-L$(MPC_LIBDIR) -L$(MPFR_LIBDIR) -L$(GMP_LIBDIR) -lmpc -lmpfr -lgmpxx -lgmp -lm
cxxflags = $(OPENMP_CXXFLAGS) -I$(top_srcdir)/include -I$(LAPACK_INCLUDEDIR) -I$(GMP_INCLUDEDIR) -I$(MPFR_INCLUDEDIR) -I$(MPC_INCLUDEDIR) -I$(top_srcdir)/mpfrc++ -D___MPLAPACK_BUILD_WITH_MPFR___ -I$(top_srcdir)/mplapack/test/fable

check_PROGRAMS = $(mplapack_mpfr_eigtest_PROGRAMS)
TESTS = $(check_PROGRAMS) do-tests
mplapack_mpfr_eigtestdir = $(prefix)/share/mplapack/test/mplapack/eig/mpfr
mplapack_mpfr_eigtest_PROGRAMS = \
xeigtstR_mpfr \
xeigtstC_mpfr

$(mplapack_mpfr_eigtest_PROGRAMS): $(lib_LTLIBRARIES)

xeigtstR_mpfr_SOURCES  = ../common/Rchkee.cpp  ../../../../mpblas/test/common/mplapack.test.cpp
xeigtstR_mpfr_LDFLAGS  = $(libdepends) $(mplibs) -L$(LAPACK_LIBDIR) -llapacke -llapack -lblas -lgfortran
xeigtstR_mpfr_CXXFLAGS = $(cxxflags)

xeigtstC_mpfr_SOURCES  = ../common/Cchkee.cpp ../../../../mpblas/test/common/mplapack.test.cpp
xeigtstC_mpfr_LDFLAGS  = $(libdepends) $(mplibs) -L$(LAPACK_LIBDIR) -llapacke -llapack -lblas -lgfortran
xeigtstC_mpfr_CXXFLAGS = $(cxxflags)

do-tests: Rbal.out Rbak.out Rnep.out Rsep.out Rse2.out Rsvd.out Red.out Rbb.out Rgg.out Rdgqr.out Rec.out

clean-local:
	rm -f *.out *~ \#*

Rnep.out:
	@echo NEP: Testing Nonsymmetric Eigenvalue Problem routines
	./xeigtstR_mpfr < nep.in > $@ 2>&1

Rsep.out:
	@echo SEP: Testing Symmetric Eigenvalue Problem routines
	./xeigtstR_mpfr < sep.in > $@ 2>&1

Rse2.out:
	@echo SEP: Testing Symmetric Eigenvalue Problem routines
	./xeigtstR_mpfr < se2.in > $@ 2>&1

Rsvd.out:
	@echo SVD: Testing Singular Value Decomposition routines
	./xeigtstR_mpfr < svd.in > $@ 2>&1

Rec.out:
	@echo DEC: Testing Eigen Condition Routines
	./xeigtstR_mpfr < Rec.in > $@ 2>&1

Red.out:
	@echo DEV: Testing Nonsymmetric Eigenvalue Driver
	./xeigtstR_mpfr < Red.in > $@ 2>&1

Rgg.out:
	@echo DGG: Testing Nonsymmetric Generalized Eigenvalue Problem routines
	./xeigtstR_mpfr < Rgg.in > $@ 2>&1

Rgd.out:   #NG (uses partially Rgesvd)
	@echo DGD: Testing Nonsymmetric Generalized Eigenvalue Problem driver routines
	./xeigtstR_mpfr < Rgd.in > $@ 2>&1

Rsb.out:
	@echo DSB: Testing Symmetric Eigenvalue Problem routines
	./xeigtstR_mpfr < Rsb.in > $@ 2>&1

Rsg.out:   #NG inf. loop.
	@echo DSG: Testing Symmetric Generalized Eigenvalue Problem routines
	./xeigtstR_mpfr < Rsg.in > $@ 2>&1

Rbal.out:
	@echo Rgebal: Testing the balancing of a general matrix
	./xeigtstR_mpfr < Rbal.in > $@ 2>&1

Rbak.out:
	@echo Rgebak: Testing the back transformation of balanced matrix
	./xeigtstR_mpfr < Rbak.in > $@ 2>&1

Rgbal.out: #ng
	@echo RGGBAL: Testing the balancing of a pair of general matrices
	./xeigtstR_mpfr < Rgbal.in > $@ 2>&1

Rgbak.out: #ng
	@echo RGGBAK: Testing the back transformation of a pair of balanced matrices
	./xeigtstR_mpfr < Rgbak.in > $@ 2>&1

Rbb.out:
	@echo DBB: Testing banded Singular Value Decomposition routines
	./xeigtstR_mpfr < Rbb.in > $@ 2>&1

Rglm.out: #ng
	@echo GLM: Testing Generalized Linear Regression Model routines
	./xeigtstR_mpfr < glm.in > $@ 2>&1

Rgqr.out:
        @echo GQR: Testing Generalized QR and RQ factorization routines
	./xeigtstR_mpfr < gqr.in > $@ 2>&1

Rgsv.out: #ng
	@echo GSV: Testing Generalized Singular Value Decomposition routines
	./xeigtstR_mpfr < gsv.in > $@ 2>&1

Rcsd.out: #ng
	@echo CSD: Testing CS Decomposition routines
	./xeigtstR_mpfr < csd.in > $@ 2>&1

Rlse.out:
	@echo LSE: Testing Constrained Linear Least Squares routines
	./xeigtstR_mpfr < lse.in > $@ 2>&1
